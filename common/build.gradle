plugins {
    id 'idea'
    id 'java'
    id 'maven-publish'
    id 'dev.architectury.loom'
}

apply from: rootProject.file('buildSrc/simple-java.gradle')
apply from: rootProject.file('buildSrc/subprojects.gradle')
apply from: rootProject.file('buildSrc/package-infos.gradle')

dependencies {
    modCompileOnly "net.fabricmc:fabric-loader:${fabric_loader_version}"

    testImplementation 'org.junit.jupiter:junit-jupiter:5.8.1'
}

test {
    useJUnitPlatform()
}

publishing {
    publications {
        register('mavenIntermediary', MavenPublication) {
            from(components['java'])
            artifactId = "flywheel-${project.name}-intermediary-${artifact_minecraft_version}"
        }
        register('mavenMojmap', MavenPublication) {
            artifact jar
            artifact sourcesJar
            artifactId = "flywheel-${project.name}-mojmap-${artifact_minecraft_version}"
        }
    }
}
